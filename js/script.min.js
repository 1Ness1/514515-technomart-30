const mapLink=document.querySelector(".mini-map"),mapPopup=document.querySelector(".modal-map"),mapClose=mapPopup.querySelector(".modal-close");mapLink.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.add("modal-show")}),mapClose.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.remove("modal-show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&mapPopup.classList.contains("modal-show")&&(e.preventDefault(),mapPopup.classList.remove("modal-show"))});const messageLink=document.querySelector(".button-message"),messagePopup=document.querySelector(".modal-form"),messageClose=messagePopup.querySelector(".modal-close"),messageLogin=messagePopup.querySelector(".modal-input"),messageEmail=messagePopup.querySelector(".modal-email"),messageForm=messagePopup.querySelector(".form-grid");let isStorageSupport=!0,storage="";try{storage=localStorage.getItem("message")}catch(e){isStorageSupport=!1}messageLink.addEventListener("click",function(e){e.preventDefault(),messagePopup.classList.add("modal-show"),storage?(messageLogin.value=storage,messageEmail.focus()):messageLogin.focus()}),messageClose.addEventListener("click",function(e){e.preventDefault(),messagePopup.classList.remove("modal-show"),messagePopup.classList.remove("modal-error")}),messageForm.addEventListener("submit",function(e){messageLogin.value&&messageEmail.value?isStorageSupport&&localStorage.setItem("message",messageLogin.value):(e.preventDefault(),messagePopup.classList.remove("modal-error"),messagePopup.offsetWidth=messagePopup.offsetWidth,messagePopup.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&messagePopup.classList.contains("modal-show")&&(e.preventDefault(),messagePopup.classList.remove("modal-show"),messagePopup.classList.remove("modal-error"))});